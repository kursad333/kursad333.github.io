{"version":3,"file":"app_4-e6ab892c.js","sources":["../../src/scripts/index.ts"],"sourcesContent":["import {DokkieEvent} from \"../types\";\nimport \"../../wwwroot/assets/legacy/hboictcloud-config\";\nimport {dbGetEvents} from \"../db/EventDB\";\nimport {session, url} from \"@hboictcloud/api\";\nimport {authorizeUser, destroySession} from \"../services/AuthService\";\nimport {dateToString} from \"./util\";\n\nauthorizeUser()\n\n// Initiate DOM elements\nconst logoutBtn: HTMLElement = document.querySelector('#logoutDebug')!\nconst eventList: HTMLElement = document.querySelector('.overview-deck')!\n\n// Set event listeners\nlogoutBtn.addEventListener('click', destroySession)\ndocument.addEventListener(\"DOMContentLoaded\", showEvents)\n\n// Function responsible for requesting all events for user and rendering them\nasync function showEvents(): Promise<void> {\n    const currUser = session.get('user').userId\n    const events: Array<DokkieEvent> = await dbGetEvents({userId: currUser})\n    events?.forEach(event => {\n            eventCard(event)\n        }\n    )\n}\n\n// Function used to create and render events on DOM\nconst eventCard = (event: DokkieEvent) => {\n    const eventCard: HTMLElement = document.createElement('article')\n    eventCard.className = 'overview-card'\n    eventCard.innerHTML = (\n        '<h4>' + event.description + '</h4>' +\n        '<p>' + dateToString(event.dateCreated) + '</p>' +\n        '<p>' + event.participantCount + ' deelnemers</p>'\n    )\n    eventCard.addEventListener('click',\n        () => {url.redirect(`./event.html?id=${event.eventId}`)})\n    eventList.appendChild(eventCard)\n}\n"],"names":["authorizeUser","logoutBtn","eventList","destroySession","showEvents","currUser","session","events","dbGetEvents","event","eventCard","dateToString","url"],"mappings":"2KAOAA,IAGA,MAAMC,EAAyB,SAAS,cAAc,cAAc,EAC9DC,EAAyB,SAAS,cAAc,gBAAgB,EAGtED,EAAU,iBAAiB,QAASE,CAAc,EAClD,SAAS,iBAAiB,mBAAoBC,CAAU,EAGxD,eAAeA,GAA4B,CACvC,MAAMC,EAAWC,EAAQ,IAAI,MAAM,EAAE,OAC/BC,EAA6B,MAAMC,EAAY,CAAC,OAAQH,CAAS,CAAA,EAC/DE,GAAA,MAAAA,EAAA,QAAiBE,GAAA,CACjBC,EAAUD,CAAK,CACnB,EAER,CAGA,MAAMC,EAAaD,GAAuB,CAChCC,MAAAA,EAAyB,SAAS,cAAc,SAAS,EAC/DA,EAAU,UAAY,gBACtBA,EAAU,UACN,OAASD,EAAM,YAAc,WACrBE,EAAaF,EAAM,WAAW,EAAI,UAClCA,EAAM,iBAAmB,kBAErCC,EAAU,iBAAiB,QACvB,IAAM,CAACE,EAAI,SAAS,mBAAmBH,EAAM,OAAO,EAAE,CAAC,CAAA,EAC3DP,EAAU,YAAYQ,CAAS,CACnC"}