import{i as p,f as l,g as q,a as M,e as P,d as H,v as D,h as k,s as I,b as Z}from"./AuthService-961c522c.js";/* empty css               *//* empty css            */import{d as E}from"./ParticipantDB-fb99b23b.js";import{a as A}from"./EventDB-ba80c814.js";async function T(e){const n="SELECT * FROM payment WHERE payment.eventId = ?";try{return await p.queryDatabase(n,e)}catch(t){return console.log(t),t}}async function x(e){const n="INSERT INTO payment (name, description, amount, eventId, datePaid) VALUES (?,?,?,?,?)";try{return await p.queryDatabase(n,e.name,e.description,e.amount,e.eventId,e.datePaid)}catch(t){return console.log(t),t}}async function N(e){const n="DELETE FROM payment WHERE paymentId = ?";try{return p.queryDatabase(n,e.paymentId)}catch(t){return console.log(t),t}}async function B(e,n){const t="UPDATE payment SET amount = ? WHERE paymentId = ?";try{return p.queryDatabase(t,n,e.paymentId)}catch(c){return console.log(c),c}}const g=new Event("updateFinancials");function F(){window.open("./payment.html","_blank"),console.log("click pay")}function R(){window.open("https://wa.me/?text=","_blank"),console.log("click share")}async function $(e){const n=prompt(`Wijzig het bedrag van ${l(e.description)}`);q([n])&&(await B(e,parseInt(n)),document.dispatchEvent(g))}async function O(e){confirm(`Weet u zeker dat u de betaling voor ${l(e.description)} wilt verwijderen?`)&&(await N(e),document.dispatchEvent(g))}function b(e,n){switch(e){case"PAYMENT":const t=(h,v)=>{const i=document.createElement("button");return i.addEventListener("click",()=>v(n)),i.innerHTML=h,i},c=t(`<svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 -960 960 960" width="26">  
                        <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>                      </svg>`,$),o=t(`<svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 -960 960 960" width="26">  
                    <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>                  </svg>`,O),a=document.createElement("td");return a.className="table-input-group",a.appendChild(c),a.appendChild(o),a;case"CALCULATION":const r=(h,v)=>{const i=document.createElement("button");return i.addEventListener("click",()=>v()),i.innerHTML=h,i},s=r(`<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">  
                    <path d="m480-560-56-56 63-64H320v-80h167l-64-64 57-56 160 160-160 160ZM280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM40-800v-80h131l170 360h280l156-280h91L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68.5-39t-1.5-79l54-98-144-304H40Z"/>                  </svg>`,F),d=r(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="24" height="24">  
                    <path d="M 15 3 C 8.373 3 3 8.373 3 15 C 3 17.251208 3.6323415 19.350068 4.7109375 21.150391 L 3.1074219 27 L 9.0820312 25.431641 C 10.829354 26.425062 12.84649 27 15 27 C 21.627 27 27 21.627 27 15 C 27 8.373 21.627 3 15 3 z M 10.892578 9.4023438 C 11.087578 9.4023438 11.287937 9.4011562 11.460938 9.4101562 C 11.674938 9.4151563 11.907859 9.4308281 12.130859 9.9238281 C 12.395859 10.509828 12.972875 11.979906 13.046875 12.128906 C 13.120875 12.277906 13.173313 12.453437 13.070312 12.648438 C 12.972312 12.848437 12.921344 12.969484 12.777344 13.146484 C 12.628344 13.318484 12.465078 13.532109 12.330078 13.662109 C 12.181078 13.811109 12.027219 13.974484 12.199219 14.271484 C 12.371219 14.568484 12.968563 15.542125 13.851562 16.328125 C 14.986562 17.342125 15.944188 17.653734 16.242188 17.802734 C 16.540187 17.951734 16.712766 17.928516 16.884766 17.728516 C 17.061766 17.533516 17.628125 16.864406 17.828125 16.566406 C 18.023125 16.268406 18.222188 16.319969 18.492188 16.417969 C 18.766188 16.515969 20.227391 17.235766 20.525391 17.384766 C 20.823391 17.533766 21.01875 17.607516 21.09375 17.728516 C 21.17075 17.853516 21.170828 18.448578 20.923828 19.142578 C 20.676828 19.835578 19.463922 20.505734 18.919922 20.552734 C 18.370922 20.603734 17.858562 20.7995 15.351562 19.8125 C 12.327563 18.6215 10.420484 15.524219 10.271484 15.324219 C 10.122484 15.129219 9.0605469 13.713906 9.0605469 12.253906 C 9.0605469 10.788906 9.8286563 10.071437 10.097656 9.7734375 C 10.371656 9.4754375 10.692578 9.4023438 10.892578 9.4023438 z"/>                  </svg>`,R),u=document.createElement("span");return u.className="calculation-card-buttons",u.appendChild(s),u.appendChild(d),u}}async function z(e){const n=await T(e),t=await E(e),c=[],o=(a,r,s,d)=>`${l(a)} krijgt ${r.toFixed(2)} van ${l(s)} voor ${l(d)}`;return n.forEach(a=>{const r=a.amount/t.length;t.forEach(s=>{if(s.name!==a.name){const d=o(a.name,r,s.name,a.description);c.push(d)}})}),c}M();const m=P.getFromQueryString("id"),f=document.querySelector("#description"),L=document.querySelector("#amount"),j=document.querySelector("#logoutDebug"),U=document.querySelector("#createBtn"),W=document.querySelector("#payerSelect");let y;j.addEventListener("click",H);W.addEventListener("click",e=>C("SELECT",void 0,e));U.addEventListener("click",_);document.addEventListener("updateFinancials",async()=>{await w()});async function w(){await G(),await Y()}async function Y(){const e=await T(m),n=document.querySelector("#tableBody"),t=document.querySelector("#totalCost");let c=0;n.innerHTML="",e.forEach(a=>{const r=document.createElement("tr");r.setAttribute("data-record",a.paymentId.toString()),r.innerHTML=`  
          <td data-cell="beschrijving">${a.description}</td>  
          <td data-cell="bedrag">€ ${a.amount}</td>  
          <td data-cell="betaald door">${a.name}</td>`,r.appendChild(b("PAYMENT",a)),n.appendChild(r),c+=a.amount}),t.textContent=`€${c.toFixed(2)}`;const o=6-e.length;for(let a=0;a<o;a++){const r=document.createElement("tr");r.innerHTML=`<td>&zwnj;</td
            <td>&zwnj;</td> 
            <td>&zwnj;</td>          
            <td>&zwnj;</td>`,n.appendChild(r)}}async function G(){const e=await z(m),n=document.querySelector("#calculationDeck");n.innerHTML="",e.forEach(t=>{const c=document.createElement("p");c.className="calculation-card";const o=document.createElement("span");o.innerHTML=t,c.appendChild(o),c.appendChild(b("CALCULATION")),n.appendChild(c)})}function C(e,n,t){switch(e){case"INIT":const c=document.querySelector("#payerSelect");S("DYNAMIC",n).forEach(s=>{c.appendChild(s)});break;case"SELECT":const a=t.target;a.classList.contains("member-card")&&(document.querySelectorAll("#payerOption").forEach(d=>{d.classList.remove("member-card-selected")}),a.classList.add("member-card-selected"),y=a.getAttribute("data-payer"));break;case"CLEAR":document.querySelectorAll("#payerOption").forEach(s=>{s.classList.remove("member-card-selected")}),f.value="",L.value="";break}}async function _(e){e.preventDefault();const n=f.value,t=L.value.replace(",",".");if(D([n])&&q([t])&&y!=null){const c={name:y,description:n,datePaid:k(),amount:parseFloat(t),eventId:m};C("CLEAR"),await x(c),await w()}else I()}function S(e,n){const t=[];return n.forEach(c=>{const o=document.createElement("p");o.className="member-card",o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">  
                <path d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"/>            
             </svg>            
             <span>${c.name}</span>`,e==="DYNAMIC"&&(o.id="payerOption",o.setAttribute("data-payer",c.name)),t.push(o)}),t}async function Q(){const e=await A(m),n=await E(m),t=document.querySelector("#memberDeck");t.innerHTML="",S("STATIC",n).forEach(d=>{t.appendChild(d)});const o=document.querySelector("#pageHeader");o.textContent=l(e.description);const a=document.querySelector("#eventName");a.innerHTML=l(e.description);const r=document.querySelector("#eventDate");r.innerHTML=Z(e.dateCreated);const s=document.querySelector("#eventParticipants");s.innerHTML=e.participantCount.toString(),C("INIT",n)}document.addEventListener("DOMContentLoaded",async()=>{await Q(),await w()});
//# sourceMappingURL=app_5-384cb1e9.js.map
